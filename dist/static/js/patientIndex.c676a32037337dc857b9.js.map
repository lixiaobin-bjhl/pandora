{"version":3,"sources":["webpack:///static/js/patientIndex.c676a32037337dc857b9.js","webpack:///./src/common/service.js?d4b8*","webpack:///./src/common/function/getUrlSearch.js?8b1e*","webpack:///./src/common/util/url.js?55e6*","webpack:///./src/m/request.js?c223*","webpack:///./src/common/function/redirect.js?27cd","webpack:///./src/m/patientIndex.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","7","_interopRequireDefault","obj","__esModule","default","post","url","data","arguments","length","undefined","_axios2","form","querystring","stringify","headers","Content-Type","del","delete","params","get","put","Object","defineProperty","value","_promise","_promise2","_axios","interceptors","request","use","config","error","reject","response","JSON","parse","code","toast","message","10","getUrlSearch","parseQuery","window","location","search","11","queryStr","result","startIndex","firstChar","charAt","secondChar","substr","split","forEach","item","index","parts","key","trim","specialChar","indexOf","substring","decodeURIComponent","getOrigin","document","URL","origin","link","createElement","href","protocol","host","test","RegExp","$1","terms","join","pathname","12","uptoken","_service","upload","bindWechat","name","mobile","age","gender","getLoginUser","25","openId","_getUrlSearch","_getUrlSearch2","36","97","init","_request","then","res","_redirect2","catch","_mintUi","Indicator","close","_redirect","_vue","_vue2","_toast","_toast2","msg","render","h","attrs","id","class","$mount","open","text","spinnerType"],"mappings":"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","file":"static/js/patientIndex.c676a32037337dc857b9.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(97);\n\n\n/***/ }),\n\n/***/ 7:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _promise = __webpack_require__(26);\n\t\n\tvar _promise2 = _interopRequireDefault(_promise);\n\t\n\texports.post = post;\n\texports.form = form;\n\texports.del = del;\n\texports.get = get;\n\texports.put = put;\n\t\n\tvar _axios = __webpack_require__(23);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar querystring = __webpack_require__(37);\n\t\n\t_axios2.default.interceptors.request.use(function (config) {\n\t    config.headers['X-Requested-With'] = 'XMLHttpRequest';\n\t    return config;\n\t}, function (error) {\n\t    return _promise2.default.reject(error);\n\t});\n\t\n\t_axios2.default.interceptors.response.use(function (response) {\n\t    var data = response.data;\n\t    if (typeof data === 'string') {\n\t        data = JSON.parse(data);\n\t    }\n\t    if (data.code === 0) {\n\t        return data;\n\t    } else {\n\t        toast(data.message || '系统异常', 'error');\n\t        return _promise2.default.reject(data);\n\t    }\n\t}, function (error) {\n\t    toast('系统异常', 'error');\n\t    return _promise2.default.reject(error);\n\t});\n\t\n\tfunction errorHandler(response) {\n\t    var code = response.code;\n\t}\n\t\n\tfunction post(url) {\n\t    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\n\t    return _axios2.default.post(url, data);\n\t}\n\t\n\tfunction form(url) {\n\t    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\n\t    return _axios2.default.post(url, querystring.stringify(data), {\n\t        headers: {\n\t            \"Content-Type\": \"application/x-www-form-urlencoded\"\n\t        }\n\t    });\n\t}\n\t\n\tfunction del(url) {\n\t    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\n\t    return _axios2.default.delete(url, {\n\t        params: data\n\t    });\n\t}\n\t\n\tfunction get(url) {\n\t    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\n\t    return _axios2.default.get(url, {\n\t        params: data\n\t    });\n\t}\n\t\n\tfunction put(url) {\n\t    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\n\t    return _axios2.default.put(url, data);\n\t}\n\n/***/ }),\n\n/***/ 10:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar url = __webpack_require__(11);\n\t\n\tvar getUrlSearch = function getUrlSearch() {\n\t\n\t  return url.parseQuery(window.location.search);\n\t};\n\t\n\texports.default = getUrlSearch;\n\n/***/ }),\n\n/***/ 11:\n/***/ (function(module, exports) {\n\n\t\n\t\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.parseQuery = parseQuery;\n\texports.getOrigin = getOrigin;\n\texports.parse = parse;\n\tfunction parseQuery(queryStr) {\n\t    var result = {};\n\t\n\t    if (typeof queryStr === 'string' && queryStr.length > 1) {\n\t\n\t        var startIndex = 0;\n\t\n\t        var firstChar = queryStr.charAt(0);\n\t\n\t        if (firstChar === '?') {\n\t            startIndex = 1;\n\t        } else if (firstChar === '#') {\n\t                startIndex = 1;\n\t\n\t                var secondChar = queryStr.charAt(1);\n\t\n\t                if (secondChar === '/') {\n\t                    startIndex = 2;\n\t                }\n\t            }\n\t\n\t        if (startIndex > 0) {\n\t            queryStr = queryStr.substr(startIndex);\n\t        }\n\t        queryStr.split('&').forEach(function (item, index) {\n\t            var parts = item.split('=');\n\t            if (parts.length === 2) {\n\t                var key = parts[0].trim();\n\t                var value = parts[1].trim() || '';\n\t\n\t                var specialChar = value.indexOf('#');\n\t\n\t                if (key.indexOf('?') > 0) {\n\t                    key = key.split('?')[1];\n\t                }\n\t                if (specialChar >= 0) {\n\t                    value = value.substring(0, specialChar);\n\t                }\n\t                if (key) {\n\t                    result[key] = decodeURIComponent(value);\n\t                }\n\t            }\n\t        });\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction getOrigin(url) {\n\t\n\t    if (!url) {\n\t        url = document.URL;\n\t    }\n\t\n\t    return exports.parse(url).origin;\n\t}\n\t\n\tfunction parse(url) {\n\t\n\t    var link = document.createElement('a');\n\t    link.href = url;\n\t\n\t    url = link.href;\n\t\n\t    var origin = '';\n\t\n\t    if (link.protocol && link.host) {\n\t        origin = link.protocol + '//' + link.host;\n\t    } else if (/^(http[s]?:\\/\\/[^/]+)(?=\\/)/.test(url)) {\n\t        origin = RegExp.$1;\n\t    }\n\t\n\t    var terms = origin.split(':');\n\t\n\t    if (origin.indexOf('http:') === 0 && terms.length === 3 && terms[2] == 80) {\n\t        terms.length = 2;\n\t        origin = terms.join(':');\n\t    }\n\t\n\t    var pathname = link.pathname;\n\t\n\t    if (pathname && pathname.charAt(0) !== '/') {\n\t        pathname = '/' + pathname;\n\t    }\n\t\n\t    return {\n\t        origin: origin,\n\t        pathname: pathname,\n\t        search: link.search\n\t    };\n\t}\n\n/***/ }),\n\n/***/ 12:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.uptoken = uptoken;\n\texports.upload = upload;\n\texports.bindWechat = bindWechat;\n\texports.getLoginUser = getLoginUser;\n\t\n\tvar _service = __webpack_require__(7);\n\t\n\tfunction uptoken() {\n\t  return (0, _service.get)('/qiniu/uptoken');\n\t}\n\t\n\tfunction upload(params) {\n\t  return (0, _service.post)('/storage/upload.json', params);\n\t}\n\t\n\tfunction bindWechat(params) {\n\t  return (0, _service.post)('/patient/bindWechat.json', {\n\t    name: params.name,\n\t    mobile: params.mobile,\n\t    age: params.age,\n\t    gender: params.gender\n\t  });\n\t}\n\t\n\tfunction getLoginUser(params) {\n\t  return (0, _service.post)('/common/getLoginUser.json', {});\n\t}\n\n/***/ }),\n\n/***/ 25:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\texports.default = function (url) {\n\t\n\t    var openId = search.openId;\n\t\n\t    if (openId) {\n\t        if (url.indexOf('?') > -1) {\n\t            url += '&openId=' + openId;\n\t        } else {\n\t            url += '?openId=' + openId;\n\t        }\n\t    }\n\t    window.location.href = url;\n\t};\n\t\n\tvar _getUrlSearch = __webpack_require__(10);\n\t\n\tvar _getUrlSearch2 = _interopRequireDefault(_getUrlSearch);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar search = (0, _getUrlSearch2.default)();\n\t\n\t;\n\n/***/ }),\n\n/***/ 36:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 97:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _request = __webpack_require__(12);\n\t\n\tvar _redirect = __webpack_require__(25);\n\t\n\tvar _redirect2 = _interopRequireDefault(_redirect);\n\t\n\t__webpack_require__(36);\n\t\n\tvar _mintUi = __webpack_require__(22);\n\t\n\tvar _vue = __webpack_require__(4);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _toast = __webpack_require__(15);\n\t\n\tvar _toast2 = _interopRequireDefault(_toast);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\twindow.toast = function (msg) {\n\t    (0, _toast2.default)(msg);\n\t};\n\t\n\tvar app = new _vue2.default({\n\t    render: function render(h) {\n\t        return h(\n\t            'div',\n\t            {\n\t                attrs: { id: 'app' },\n\t                'class': 'app' },\n\t            []\n\t        );\n\t    }\n\t}).$mount('#app');\n\t\n\t_mintUi.Indicator.open({\n\t    text: '加载中',\n\t    spinnerType: 'fading-circle'\n\t});\n\t\n\tfunction init() {\n\t    (0, _request.getLoginUser)().then(function (res) {\n\t        var data = res.data;\n\t        var url = '';\n\t        if (data.mobile) {\n\t            url = 'chat.html';\n\t        } else {\n\t            url = 'bindTel.html';\n\t        }\n\t        (0, _redirect2.default)(url);\n\t    }).catch(function () {\n\t        _mintUi.Indicator.close();\n\t    });\n\t}\n\tinit();\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/patientIndex.c676a32037337dc857b9.js","/**\n * @fileOverview service util\n * @author XiaoBin Li(lixiaobin8878@gmail.com)\n */\n\n'use strict';\n\nimport axios from 'axios';\nvar querystring = require('querystring');\n\n/**\n * 添加ajax request interceptor\n */\naxios.interceptors.request.use(function (config) {\n    config.headers['X-Requested-With'] = 'XMLHttpRequest';\n    return config;\n}, function (error) {\n    return Promise.reject(error);\n});\n\n/**\n * 添加ajax response interceptor\n */\naxios.interceptors.response.use(function (response) {\n    var data = response.data;\n    if (typeof data === 'string') {\n        data = JSON.parse(data);\n    }\n    if (data.code === 0) {\n        return data;\n    } else {\n        toast(data.message || '系统异常', 'error');\n        return Promise.reject(data);\n    }\n}, function (error) {\n    toast('系统异常', 'error');\n    return Promise.reject(error);\n});\n\n/**\n * 错误处理\n *\n * @inner\n * @param {Object} response 返回的 JSON 数据\n * @return {Object}\n */\nfunction errorHandler(response) {\n    var code = response.code;\n}\n\n/**\n * 发送 post 请求\n *\n * @param {string} url 请求 url\n * @param {Object} data 发送的数据\n * @return {Promise}\n */\nexport function post(url, data = {}) {\n    return axios.post(url, data);\n}\n\n/**\n * post form参数请求\n *\n * @param {string} url 请求 url\n * @param {Object} data 发送的数据\n * @return {Promise}\n */\nexport function form(url, data = {}) {\n    return axios.post(url, \n        querystring.stringify(data), \n        {\n            headers: { \n                \"Content-Type\": \"application/x-www-form-urlencoded\"\n            }\n        }\n    );\n}\n\n/**\n * 发送 delete 请求\n *\n * @param {string} url 请求 url\n * @param {Object} data 发送的数据\n * @return {Promise}\n */\nexport function del(url, data = {}) {\n    return axios.delete(url, {\n        params: data\n    });\n}\n\n/**\n * 发送 get 请求\n *\n * @param {string} url 请求 url\n * @param {Object} data 发送的数据\n * @return {Promise}\n */\nexport function get(url, data = {}) {\n    return axios.get(url, {\n        params: data\n    });\n}\n\n/**\n * 发送 update 请求\n *\n * @param {string} url 请求 url\n * @param {Object} data 发送的数据\n * @return {Promise}\n */\nexport function put(url, data = {}) {\n    return axios.put(url, data);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/common/service.js","/**\n * @file 获取url search\n * @author XiaoBin Li(lixiaobin@baijiahulian.com)\n */\n\n'use strict';\n\nlet url = require('../util/url');\n\nlet getUrlSearch = function () {\n\n\treturn url.parseQuery(window.location.search);\n};\n\nexport default getUrlSearch;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/function/getUrlSearch.js","/**\n * @fileOverview url\n * @author XiaoBin Li(lixiaobin@baijiahulian.com)\n */\n\n'use strict';\n\n/**\n * 把查询字符串解析成对象，反向操作可用 $.param\n *\n * @param {string} queryStr 查询字符串，可直接把 location.search 或 location.hash 扔进来解析\n * @return {Object}\n */\nexport function parseQuery (queryStr) {\n    let result = { };\n\n    if (typeof queryStr === 'string' && queryStr.length > 1) {\n\n        let startIndex = 0;\n\n        let firstChar = queryStr.charAt(0);\n\n        // query 如 ?a=1\n        if (firstChar === '?') {\n            startIndex = 1;\n        }\n        // hash 如 #a=1\n        else if (firstChar === '#') {\n            startIndex = 1;\n\n            let secondChar = queryStr.charAt(1);\n            // hash 如 #/a=1&b=2\n            if (secondChar === '/') {\n                startIndex = 2;\n            }\n        }\n\n        if (startIndex > 0) {\n            queryStr = queryStr.substr(startIndex);\n        }\n        queryStr.split('&').forEach(\n            function (item, index) {\n                let parts = item.split('=');\n                if (parts.length === 2) {\n                    let key = parts[0].trim()\n                    let value = (parts[1].trim()) || '';\n\n                    let specialChar = value.indexOf('#');\n\n\n                    if (key.indexOf('?') > 0) {\n                        key = key.split('?')[1];\n                    }\n                    if (specialChar >= 0) {\n                        value = value.substring(0, specialChar);\n                    }\n                    if (key) {\n                        result[key] = decodeURIComponent(value);\n                    }\n                }\n            }\n        );\n    }\n\n    return result;\n}\n\n/**\n * 获取当前网页的 origin（可在现代浏览器控制台输入 location.origin）\n *\n * @param {?string} url\n * @return {string}\n */\nexport function getOrigin (url) {\n\n    if (!url) {\n        url = document.URL;\n    }\n\n    return exports.parse(url).origin;\n\n}\n\n/**\n * 解析 url，返回格式遵循 location 属性的命名\n *\n * @param {string} url\n * @return {Object}\n */\nexport function parse (url) {\n\n    let link = document.createElement('a');\n    link.href = url;\n\n    // 用 a 来格式化\n    url = link.href;\n\n    let origin = '';\n\n    if (link.protocol && link.host) {\n        origin = link.protocol + '//' + link.host;\n    }\n    else if (/^(http[s]?:\\/\\/[^/]+)(?=\\/)/.test(url)) {\n        origin = RegExp.$1;\n    }\n\n    // xp 下 http 可能会解析出 80 端口，实际是不需要的\n    let terms = origin.split(':');\n\n    if (origin.indexOf('http:') === 0\n        && terms.length === 3\n        && terms[2] == 80\n    ) {\n        terms.length = 2;\n        origin = terms.join(':');\n    }\n\n    let pathname = link.pathname;\n\n    if (pathname && pathname.charAt(0) !== '/') {\n        pathname = '/' + pathname;\n    }\n\n    return {\n        origin: origin,\n        pathname: pathname,\n        search: link.search\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/util/url.js","/**\n * @fileOverview pandora-m-request\n * @author XiaoBin Li(lixiaobin8878@gmail.com)\n */\n\n'use strict';\n\nimport  { post, form, get } from '../common/service'\n\n/** \n * 获取上传产品token \n */\nexport function uptoken () {\n    return get('/qiniu/uptoken');\n}\n\n/**\n * 上传图片\n * @param {string} params.token 上传token\n * @param {Object} params.file 上传图片本身\n */\nexport function upload (params) {\n    return post('/storage/upload.json', params)\n}\n\n/**\n * 绑定用户信息\n * \n * @param {string} params.name 用户名\n * @param {string} params.mobile 手机\n * @param {number} params.age 年龄\n * @param {number} params.gender 性别\n * \n * @return {Promise}\n */\nexport function bindWechat (params) {\n    return post('/patient/bindWechat.json', {\n        name: params.name,\n        mobile: params.mobile,\n        age: params.age,\n        gender: params.gender\n    });\n}\n\n/**\n * 获取用户登录信息 \n */\nexport function getLoginUser (params) {\n    return post('/common/getLoginUser.json', {});\n}\n\n\n// WEBPACK FOOTER //\n// ./src/m/request.js","/**\n * @fileOverview chairty-function-redirect\n * @author XiaoBin Li(lixiaobin8878@gmail.com) \n */\n\n'use strict';\n\nimport getUrlSearch from './getUrlSearch';\n\nvar search = getUrlSearch();\n\nexport default function (url) {\n\n    var openId = search.openId;\n    \n    if (openId) {\n        if (url.indexOf('?') > -1) {\n            url += '&openId=' + openId;\n        } else {\n            url += '?openId=' + openId;\n        }\n    }\n    window.location.href = url;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/common/function/redirect.js","\nimport { getLoginUser } from './request'\nimport redirect from '../common/function/redirect'\nimport 'mint-ui/lib/style.css'\nimport { Indicator } from 'mint-ui'\nimport Vue from 'vue'\nimport Toast from 'mint-ui/lib/toast'\n\nwindow.toast = function(msg) {\n    Toast(msg);\n}\n\n\nconst app = new Vue({\n    render(h) {\n        return (<div id = \"app\" class = \"app\">\n                </div>\n        )\n    }\n}).$mount('#app');\n\nIndicator.open({\n    text: '加载中',\n    spinnerType: 'fading-circle'\n});\n\nfunction init () {\n    getLoginUser()\n        .then((res)=>{\n            var data = res.data;\n            var url = '';\n            if (data.mobile) {\n                url = 'chat.html';\n            } else {\n                url = 'bindTel.html';\n            }\n            redirect(url);\n        })\n        .catch(()=> {\n            Indicator.close();\n        })\n}\ninit();\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/m/patientIndex.js"],"sourceRoot":""}